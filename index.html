<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flightfeed.uk - Choose Your Region</title>
    
    <!-- Essential Mobile Metadata -->
    <meta name="theme-color" content="#0a0a1a">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%23000000'/><text y='.9em' x='50%' dominant-baseline='middle' text-anchor='middle' font-family='Orbitron' font-size='90' fill='%23FFFFFF' style='filter: drop-shadow(4px 0 0 %23FF0050) drop-shadow(-4px 0 0 %2300F2EA);'>F</text></svg>">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FlightFeed UK">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%230a0a1a'/><defs><style>@font-face{font-family:'Orbitron';src:url('https://fonts.gstatic.com/s/orbitron/v17/yMJRMIlzDPvjdzoPEK3cQ_2n.woff2') format('woff2');font-weight:700;}</style></defs><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' font-family='Orbitron' font-size='70' fill='%23FFFFFF' style='filter: drop-shadow(4px 0 0 %23FF0050) drop-shadow(-4px 0 0 %2300F2EA);'>F</text><text x='50%' y='85%' font-family='Inter, sans-serif' font-size='18' fill='%238AAEF9' text-anchor='middle'>flightfeed.uk</text></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-blue: #00BFFF;
            --neon-cyan: #00FFFF;
            --neon-red: #FF0077;
            --bg-dark: #0a0a1a;
            --secondary-bg: #1a1a2a;
        }
        body { 
            font-family: 'Inter', sans-serif;
            padding-top: 0; 
        }
        .neon-text {
            color: var(--neon-cyan);
            text-shadow: 0 0 5px var(--neon-blue), 0 0 10px var(--neon-blue), 0 0 20px var(--neon-cyan), 0 0 30px rgba(0, 255, 255, 0.5);
            font-family: 'Orbitron', sans-serif;
        }
        .neon-red-text {
            color: var(--neon-red);
            text-shadow: 0 0 5px var(--neon-red), 0 0 10px var(--neon-red), 0 0 20px rgba(255, 0, 119, 0.5);
            font-family: 'Orbitron', sans-serif;
        }
        .neon-cyan-glow {
            color: var(--neon-cyan);
            text-shadow: 0 0 5px var(--neon-cyan), 0 0 10px rgba(0, 255, 255, 0.7);
            font-family: 'Orbitron', sans-serif;
        }
        .bg-dark-grid {
            background-color: var(--bg-dark);
            background-image: linear-gradient(0deg, transparent 24%, rgba(0, 191, 255, 0.03) 25%, rgba(0, 191, 255, 0.03) 26%, transparent 27%, transparent 74%, rgba(0, 191, 255, 0.03) 75%, rgba(0, 191, 255, 0.03) 76%, transparent 77%), linear-gradient(90deg, transparent 24%, rgba(0, 191, 255, 0.03) 25%, rgba(0, 191, 255, 0.03) 26%, transparent 27%, transparent 74%, rgba(0, 191, 255, 0.03) 75%, rgba(0, 191, 255, 0.03) 76%, transparent 77%);
            background-size: 50px 50px;
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animated-fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
        }
        
        @keyframes neonPulseActive {
            0% { box-shadow: 0 0 15px rgba(0, 191, 255, 0.3); border-color: rgba(0, 191, 255, 0.5); }
            50% { box-shadow: 0 0 25px rgba(0, 255, 255, 0.6), 0 0 50px rgba(0, 255, 255, 0.2); border-color: var(--neon-cyan); }
            100% { box-shadow: 0 0 15px rgba(0, 191, 255, 0.3); border-color: rgba(0, 191, 255, 0.5); }
        }
        
        @keyframes neonPulseRed {
            0% { box-shadow: 0 0 15px rgba(255, 0, 119, 0.3); border-color: rgba(255, 0, 119, 0.5); }
            50% { box-shadow: 0 0 25px rgba(255, 0, 119, 0.6), 0 0 50px rgba(255, 0, 119, 0.2); border-color: var(--neon-red); }
            100% { box-shadow: 0 0 15px rgba(255, 0, 119, 0.3); border-color: rgba(255, 0, 119, 0.5); }
        }

        .region-button.active-pulse {
            animation: neonPulseActive 3s infinite ease-in-out;
        }

        .region-button-red.active-pulse-red {
            animation: neonPulseRed 3s infinite ease-in-out;
        }
        
        .top-banner-fixed {
            background-color: #1a1a2a;
            border-bottom: 2px solid var(--neon-cyan);
            position: fixed;
            top: 1px;
            left: 0;
            right: 0;
            z-index: 40;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }
        
        .diagonal-ribbon {
            position: absolute;
            top: 5px;
            right: -25px;
            width: 150px;
            padding: 4px 0;
            font-weight: bold;
            text-align: center;
            font-size: 0.75rem;
            transform: rotate(45deg);
            transform-origin: 50% 50%;
            letter-spacing: 0.5px;
            line-height: 1; 
            z-index: 10;
        }

        .section-ribbon {
            position: absolute;
            top: 20px;
            right: -40px;
            width: 200px;
            padding: 6px 0;
            font-weight: bold;
            text-align: center;
            font-size: 0.9rem;
            transform: rotate(45deg);
            transform-origin: 50% 50%;
            letter-spacing: 1px;
            z-index: 20;
            font-family: 'Orbitron', sans-serif;
            box-shadow: 0 0 15px rgba(255, 0, 119, 0.9);
        }
        
        .region-button {
            position: relative; 
            background-color: var(--secondary-bg);
            border: 2px solid rgba(0, 191, 255, 0.5);
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.3);
            transition: all 0.3s ease-in-out;
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.7);
        }
        .region-button:hover {
            transform: scale(1.05);
            border-color: var(--neon-cyan);
            box-shadow: 0 0 20px var(--neon-cyan), 0 0 40px rgba(0, 255, 255, 0.5);
            background-color: #2a2a3a;
        }

        .region-button-red {
            position: relative; 
            background-color: var(--secondary-bg);
            border: 2px solid rgba(255, 0, 119, 0.5);
            box-shadow: 0 0 15px rgba(255, 0, 119, 0.3);
            transition: all 0.3s ease-in-out;
            text-shadow: 0 0 5px rgba(255, 0, 119, 0.7);
        }
        .region-button-red:hover {
            transform: scale(1.05);
            border-color: var(--neon-red);
            box-shadow: 0 0 20px var(--neon-red), 0 0 40px rgba(255, 0, 119, 0.5);
            background-color: #2a2a3a;
        }
        
        .modal-overlay { background-color: rgba(0, 0, 0, 0.85); }
        .modal-content {
            background-color: var(--bg-dark);
            border: 2px solid var(--neon-cyan); 
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.2);
            max-height: 80vh;
            overflow-y: auto;
        }
        .agree-button {
            background-color: #1a1a2a;
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            transition: all 0.2s;
        }
        .agree-button:hover {
            background-color: var(--neon-cyan); color: #0a0a1a; box-shadow: 0 0 20px var(--neon-cyan);
        }
        .footer-link { color: var(--neon-cyan); transition: color 0.2s; cursor: pointer; }
        .footer-link:hover { color: white; text-shadow: 0 0 5px var(--neon-cyan); }
        
        #introModal { background-color: var(--bg-dark); z-index: 200; }
        .intro-screen-text { font-family: 'Orbitron', sans-serif; letter-spacing: 2px; }
        #welcomePopup { z-index: 150; }
        .welcome-popup-content {
            background: linear-gradient(135deg, #1a1a2a, #2a2a3a);
            border: 3px solid var(--neon-blue);
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.6);
            position: relative;
        }
    </style>
    <!-- Brevo Conversations {literal} -->
<script>
    (function(d, w, c) {
        w.BrevoConversationsID = '6946ac0fc4e8900eba0afd30';
        w[c] = w[c] || function() {
            (w[c].q = w[c].q || []).push(arguments);
        };
        var s = d.createElement('script');
        s.async = true;
        s.src = 'https://conversations-widget.brevo.com/brevo-conversations.js';
        if (d.head) d.head.appendChild(s);
    })(document, window, 'BrevoConversations');
</script>
<!-- /Brevo Conversations {/literal} -->
</head>
<body class="bg-dark-grid text-gray-200 min-h-screen p-2 sm:p-4">

    <!-- Scroll Progress -->
    <div id="progressBarContainer" class="fixed top-0 left-0 w-full z-50 h-1" style="background-color: rgba(0, 191, 255, 0.1);">
        <div id="progressBar" class="h-full" style="width: 0%; background-color: var(--neon-cyan); box-shadow: 0 0 5px var(--neon-cyan), 0 0 10px rgba(0, 255, 255, 0.7); transition: width 0.1s linear;"></div>
    </div>
    
    <!-- Top News Banner -->
    <div class="top-banner-fixed fixed top-1 left-0 right-0 z-40">
        <div class="max-w-5xl mx-auto flex justify-between items-center px-4 relative h-8">
            <p class="text-xs sm:text-sm font-semibold text-gray-400 py-1">
                <span class="font-bold text-sm sm:text-base neon-cyan-glow">NEW:</span> 
                England zones are now live and fully available! 
            </p>
            <div class="hidden sm:block diagonal-ribbon bg-cyan-600 text-gray-900 shadow-xl shadow-cyan-500/80">
                LATEST
            </div>
        </div>
    </div>

    <!-- Intro Modal -->
    <div id="introModal" class="modal-overlay fixed inset-0 flex items-center justify-center hidden">
        <div class="w-11/12 max-w-2xl text-center">
            
            <!-- Step 1 -->
            <div id="introStep1" class="space-y-6 hidden">
                <p class="intro-screen-text text-5xl sm:text-7xl font-extrabold neon-text animate-pulse">WELCOME</p>
                <p class="text-xl sm:text-3xl text-gray-300">Preparing flightfeed.uk</p>
                <button id="introNextBtn1" class="agree-button py-3 px-8 rounded-xl font-bold uppercase tracking-wider text-xl mt-8">Next</button>
            </div>

            <!-- Step 2: England and Wales Active -->
            <div id="introStep2" class="space-y-6 hidden">
                <h2 class="intro-screen-text text-3xl sm:text-5xl font-extrabold neon-cyan-glow mb-4">ENGLAND & WALES ACTIVE</h2>
                <p class="text-lg sm:text-2xl text-gray-300">All flight zones across England and Wales are now online.</p>
                <div class="p-4 mt-6 rounded-lg border border-cyan-500/50 bg-cyan-900/20">
                    <p class="text-xl sm:text-3xl font-bold neon-text">Expansion Complete</p>
                    <p class="text-base sm:text-xl text-gray-400 mt-1">Full coverage for London, Birmingham, Manchester, and the South West is now available.</p>
                </div>
                <button id="introNextBtn2" class="agree-button py-3 px-8 rounded-xl font-bold uppercase tracking-wider text-xl mt-8">Next: Scotland Status</button>
            </div>

            <!-- Step 3: Scotland -->
            <div id="introStep3" class="space-y-6 hidden">
                <h2 class="intro-screen-text text-3xl sm:text-5xl font-extrabold neon-text mb-4">SCOTLAND STATUS</h2>
                <p class="text-lg sm:text-2xl text-gray-300">We are currently building out the Scotland flight network.</p>
                <div class="p-4 mt-6 rounded-lg border border-red-500/50 bg-red-900/20">
                    <p class="text-xl sm:text-3xl font-bold text-red-500" style="font-family: 'Orbitron';">COMING SOON</p>
                    <p class="text-base sm:text-xl text-gray-400 mt-1">Scotland coverage is in progress.</p>
                </div>
                <button id="introFinishBtn" class="agree-button py-3 px-8 rounded-xl font-bold uppercase tracking-wider text-xl mt-8">Launch App</button>
            </div>
        </div>
    </div>
    
    <!-- Persistent Welcome Popup -->
    <div id="welcomePopup" class="modal-overlay fixed inset-0 flex items-center justify-center hidden">
        <div class="welcome-popup-content w-11/12 max-w-md p-6 sm:p-8 rounded-2xl mx-auto shadow-2xl">
            <button id="welcomeCloseBtn" class="absolute top-3 right-3 text-white hover:text-red-400 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h2 class="text-2xl sm:text-3xl font-extrabold uppercase mb-2 neon-cyan-glow">WELCOME</h2>
            <p class="text-lg sm:text-xl font-bold text-cyan-200">England zones are now available!</p>
            <p class="text-sm text-gray-400 mt-3">Select any region in England or Wales to view the live flight feed.</p>
        </div>
    </div>
    

    <div class="w-full max-w-5xl mx-auto text-center main-content-area"> 
        
        <header id="mainHeader" class="mb-8 sm:mb-10 p-2 border-b-2 border-cyan-500/50 pt-16 animated-fade-in-up" style="animation-delay: 0.8s;">
            <h1 class="text-4xl sm:text-7xl font-extrabold tracking-tight neon-text uppercase">flightfeed.uk</h1>
            <p class="text-sm sm:text-xl font-semibold tracking-wide text-gray-300 mt-2">UK Drone Flight Zone Directory</p>
            <p class="text-lg sm:text-2xl font-bold tracking-wider text-cyan-400 mt-6">SELECT YOUR REGION (ENGLAND & WALES ACTIVE)</p>
        </header>

        <!-- WALES SECTION -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6 lg:gap-8 animated-fade-in-up" style="animation-delay: 1.0s;">
            <a href="south-wales.html" class="region-button active-pulse block p-4 sm:p-6 rounded-xl sm:rounded-2xl">
                <div class="text-2xl sm:text-3xl font-extrabold neon-text">SOUTH WALES</div>
                <p class="text-xs sm:text-sm text-gray-400 mt-1">Cardiff, Newport & Valleys</p>
            </a>
            <a href="west-wales.html" class="region-button active-pulse block p-4 sm:p-6 rounded-xl sm:rounded-2xl">
                <div class="text-2xl sm:text-3xl font-extrabold neon-text">WEST WALES</div>
                <p class="text-xs sm:text-sm text-gray-400 mt-1">Pembrokeshire & Swansea</p>
            </a>
            <a href="east-wales.html" class="region-button active-pulse block p-4 sm:p-6 rounded-xl sm:rounded-2xl">
                <div class="text-2xl sm:text-3xl font-extrabold neon-text">EAST WALES</div>
                <p class="text-xs sm:text-sm text-gray-400 mt-1">Monmouthshire & Wrexham</p>
            </a>
            <a href="north-wales.html" class="region-button active-pulse block p-4 sm:p-6 rounded-xl sm:rounded-2xl">
                <div class="text-2xl sm:text-3xl font-extrabold neon-text">NORTH WALES</div>
                <p class="text-xs sm:text-sm text-gray-400 mt-1">Gwynedd & Anglesey</p>
            </a>
        </div>
        
        <!-- ENGLAND SECTION (RED THEMED) -->
        <div id="englandSection" class="relative mt-8 sm:mt-12 mb-8 p-3 sm:p-4 rounded-xl border border-red-500/20 animated-fade-in-up" style="animation-delay: 1.2s;">
            <h2 class="text-lg sm:text-3xl font-extrabold tracking-wider mb-6 uppercase neon-red-text border-b-2 border-red-500/20 pb-2">
                England Zones
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4">
                <a href="london.html" class="region-button-red active-pulse-red block p-4 rounded-xl">
                    <div class="text-xl sm:text-2xl font-extrabold neon-red-text">LONDON</div>
                    <p class="text-xs mt-1 text-gray-400">Greater London</p>
                </a>
                <a href="south-east.html" class="region-button-red active-pulse-red block p-4 rounded-xl">
                    <div class="text-xl sm:text-2xl font-extrabold neon-red-text">SOUTH EAST</div>
                    <p class="text-xs mt-1 text-gray-400">Brighton, Oxford, Reading</p>
                </a>
                <a href="south-west.html" class="region-button-red active-pulse-red block p-4 rounded-xl">
                    <div class="text-xl sm:text-2xl font-extrabold neon-red-text">SOUTH WEST</div>
                    <p class="text-xs mt-1 text-gray-400">Bristol, Plymouth, Exeter</p>
                </a>
                <a href="east-england.html" class="region-button-red active-pulse-red block p-4 rounded-xl">
                    <div class="text-xl sm:text-2xl font-extrabold neon-red-text">EAST OF ENGLAND</div>
                    <p class="text-xs mt-1 text-gray-400">Cambridge, Norwich</p>
                </a>
                <a href="west-midlands.html" class="region-button-red active-pulse-red block p-4 rounded-xl">
                    <div class="text-xl sm:text-2xl font-extrabold neon-red-text">WEST MIDLANDS</div>
                    <p class="text-xs mt-1 text-gray-400">Birmingham, Coventry</p>
                </a>
                <a href="east-midlands.html" class="region-button-red active-pulse-red block p-4 rounded-xl">
                    <div class="text-xl sm:text-2xl font-extrabold neon-red-text">EAST MIDLANDS</div>
                    <p class="text-xs mt-1 text-gray-400">Nottingham, Leicester</p>
                </a>
                <a href="yorkshire.html" class="region-button-red active-pulse-red block p-4 rounded-xl">
                    <div class="text-xl sm:text-2xl font-extrabold neon-red-text">YORKSHIRE</div>
                    <p class="text-xs mt-1 text-gray-400">Leeds, Sheffield, York</p>
                </a>
                <a href="north-west.html" class="region-button-red active-pulse-red block p-4 rounded-xl">
                    <div class="text-xl sm:text-2xl font-extrabold neon-red-text">NORTH WEST</div>
                    <p class="text-xs mt-1 text-gray-400">Manchester, Liverpool</p>
                </a>
                <a href="north-east.html" class="region-button-red active-pulse-red block p-4 rounded-xl">
                    <div class="text-xl sm:text-2xl font-extrabold neon-red-text">NORTH EAST</div>
                    <p class="text-xs mt-1 text-gray-400">Newcastle, Sunderland</p>
                </a>
            </div>
        </div>

        <!-- SCOTLAND SECTION (REMAINING BLURRED) -->
        <div id="scotlandSection" class="relative mt-8 mb-8 p-3 sm:p-4 rounded-xl border border-red-900/40 animated-fade-in-up" style="animation-delay: 1.4s;">
            <div class="section-ribbon bg-red-600 text-gray-900 font-bold uppercase">NEXT UP</div>
            <div class="absolute inset-0 z-10 flex flex-col items-center justify-center bg-black/50 rounded-xl">
                <p class="text-xl sm:text-2xl font-extrabold" style="color: var(--neon-red); text-shadow: 0 0 10px var(--neon-red); font-family: 'Orbitron';">SCOTLAND: COMING SOON</p>
                <p class="text-xs text-gray-400 mt-2">UK Expansion Stage 3</p>
            </div>
            <div class="filter blur-md opacity-30 pointer-events-none p-6">
                <h2 class="text-lg font-extrabold mb-4 uppercase">Scotland Zones</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                     <div class="p-4 bg-gray-900 rounded-xl border border-gray-700">HIDDEN</div>
                     <div class="p-4 bg-gray-900 rounded-xl border border-gray-700">HIDDEN</div>
                </div>
            </div>
        </div>
        
        <footer class="text-center text-xs text-gray-600 mt-8 sm:mt-12 pt-4 border-t border-cyan-500/20 animated-fade-in-up" style="animation-delay: 1.6s;">
            <p>&copy; 2025 Lawson Morris | Always check official NOTAMs and local restrictions before flying.</p>
            <p class="mt-1">
                <a id="openFullTcBtn" href="#" class="footer-link font-bold mr-4">Terms and Conditions</a>
                <span class="text-gray-600">|</span>
                <a id="legalLinkBtn" href="https://legal.lawsonmorris.co.uk" class="footer-link font-bold ml-4">Legal</a>
            </p>
        </footer>

    </div>
    
    <!-- T&C Modals -->
    <div id="tcModal" class="modal-overlay fixed inset-0 flex items-center justify-center z-[100] hidden">
        <div class="modal-content w-11/12 max-w-lg p-6 sm:p-8 rounded-2xl mx-auto">
            <h2 class="text-2xl sm:text-3xl font-extrabold uppercase mb-4 neon-cyan-glow">Terms of Use</h2>
            <div class="text-left text-sm space-y-4 mb-6">
                <p>Safety first. By using <span class="font-bold">flightfeed.uk</span>, you agree to the terms below.</p>
                <p class="p-3 rounded-lg bg-cyan-900/30 border border-cyan-700/50">
                    <span class="font-bold text-cyan-400">Disclaimer:</span> Information is for guidance. Verify all NOTAMs through official channels.
                </p>
            </div>
            <button id="initialViewBtn" class="agree-button w-full py-3 rounded-xl font-bold uppercase tracking-wider text-lg">Accept & Continue</button>
        </div>
    </div>

    <div id="fullTcModal" class="modal-overlay fixed inset-0 flex items-center justify-center z-[101] hidden">
        <div class="modal-content w-11/12 max-w-xl p-6 sm:p-8 rounded-2xl mx-auto">
            <h2 class="text-2xl sm:text-3xl font-extrabold uppercase mb-4 neon-cyan-glow">Detailed Terms (V 1.1)</h2>
            <div class="text-left text-xs sm:text-sm space-y-4 mb-6 max-h-96 overflow-y-auto pr-2">
                <p class="font-bold text-cyan-300">1. Liability</p>
                <p>Lawson Morris/flightfeed.uk is not liable for flight errors or violations resulting from use of this directory.</p>
                <p class="font-bold text-cyan-300">2. Pre-Flight</p>
                <p>Operators must check live NATS/CAA data before takeoff.</p>
            </div>
            <button id="finalAgreeBtn" class="agree-button w-full py-3 mt-4 rounded-xl font-bold uppercase tracking-wider text-lg">Final Acceptance</button>
        </div>
    </div>

    <script>
        const agreementKey = 'flightfeed_uk_tc_agreed_v1_1';
        const introSeenKey = 'flightfeed_uk_intro_seen_session_v1';
        let currentIntroStep = 1;

        const introModal = document.getElementById('introModal');
        const introNextBtn1 = document.getElementById('introNextBtn1');
        const introNextBtn2 = document.getElementById('introNextBtn2');
        const introFinishBtn = document.getElementById('introFinishBtn');
        const welcomePopup = document.getElementById('welcomePopup');
        const welcomeCloseBtn = document.getElementById('welcomeCloseBtn');
        const initialModal = document.getElementById('tcModal');
        const fullModal = document.getElementById('fullTcModal');
        const initialViewBtn = document.getElementById('initialViewBtn');
        const finalAgreeBtn = document.getElementById('finalAgreeBtn');
        const openFullTcBtn = document.getElementById('openFullTcBtn'); 

        function toggleScroll(disable) { document.body.style.overflow = disable ? 'hidden' : ''; }

        function updateProgressBar() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            let scrolled = height > 0 ? (winScroll / height) * 100 : 0;
            document.getElementById("progressBar").style.width = scrolled + "%";
        }
        
        function showIntroStep(step) {
            [1, 2, 3].forEach(i => {
                const el = document.getElementById(`introStep${i}`);
                if (el) el.classList.toggle('hidden', i !== step);
            });
        }
        
        function showIntroScreen() {
            currentIntroStep = 1;
            introModal.classList.remove('hidden');
            toggleScroll(true);
            showIntroStep(currentIntroStep);
        }
        
        function handleIntroNext() {
            currentIntroStep++;
            showIntroStep(currentIntroStep);
        }

        function closeIntroScreen() {
            sessionStorage.setItem(introSeenKey, 'true');
            introModal.classList.add('hidden');
            showWelcomePopup();
        }

        function showWelcomePopup() {
            welcomePopup.classList.remove('hidden');
            toggleScroll(true);
        }

        function closeWelcomePopup() {
            welcomePopup.classList.add('hidden');
            checkAndShowTCModal();
        }

        function checkAndShowTCModal() {
            if (localStorage.getItem(agreementKey) !== 'true') {
                initialModal.classList.remove('hidden');
                toggleScroll(true);
            } else {
                toggleScroll(false);
            }
        }
        
        window.addEventListener('scroll', updateProgressBar);
        window.onload = () => {
            if (sessionStorage.getItem(introSeenKey) !== 'true') showIntroScreen();
            else showWelcomePopup();
        };

        introNextBtn1.addEventListener('click', handleIntroNext);
        introNextBtn2.addEventListener('click', handleIntroNext);
        introFinishBtn.addEventListener('click', closeIntroScreen);
        welcomeCloseBtn.addEventListener('click', closeWelcomePopup);
        initialViewBtn.addEventListener('click', () => {
            initialModal.classList.add('hidden');
            fullModal.classList.remove('hidden');
        });
        openFullTcBtn.addEventListener('click', (e) => {
            e.preventDefault();
            fullModal.classList.remove('hidden');
            toggleScroll(true);
        });
        finalAgreeBtn.addEventListener('click', () => {
            localStorage.setItem(agreementKey, 'true');
            fullModal.classList.add('hidden');
            toggleScroll(false);
        });
    </script>
</body>
</html>
