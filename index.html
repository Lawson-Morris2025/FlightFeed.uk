<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlightFeed.uk</title>
    
    <!-- Theme and PWA config --><meta name="theme-color" content="#00BFFF">
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext x='50%25' y='50%25' dominant-baseline='central' text-anchor='middle' font-size='60' fill='%2300BFFF' font-family='Orbitron, sans-serif'%3EF%3C/text%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext x='50%25' y='50%25' dominant-baseline='central' text-anchor='middle' font-size='60' fill='%2300BFFF' font-family='Orbitron, sans-serif'%3EF%3C</text>%3E%3C/svg%3E">
    
    <link rel="manifest" href="data:application/json;base64,eyJpY29ucyI6W3sic3JjIjoib3B0aW9uYWxfaWNvbi5zdmciLCJzaXplcyI6IjE5MngxOTIiLCJ0eXBlIjoiZmlsZV91cmwifSwic3JjIjoib3B0aW9uYWxfaWNvbi5zdmciLCJzaXplcyI6IjUxMng1MTIiLCJ0eXBlIjoiZmlsZV91cmwifV0sIm5hbWUiOiJGbGlnaHRGZWVkLnVrIHwgQ2FyZGlmZiBVUEJWIENvbW1hbmQiLCJzaG9ydF9uYW1lOiJGbGlnaHRGZWVkIiwic3RhcnRfdXJsIjoiLi8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZWRydW5rYmFjayIsImJhY2tncm91bmRfY29sb3IiOiIjMEQxMTE3IiwidGhlbWVfY29sb3IiOiIjMDBCRkZGIH0=">

    <!-- Tailwind CSS and Fonts --><script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght[300..900]&display=swap" rel="stylesheet">
    <style>
        /* Define custom Tailwind colors and configuration for the futuristic look */
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'matrix-blue': '#00BFFF', /* Primary accent */
                        'neon-green': '#39FF14', /* Safe/Success */
                        'electric-yellow': '#FFD700', /* Moderate/Caution */
                        'danger-red': '#FF073A', /* Unsafe/Restricted */
                        'dark-bg': '#0D1117', /* Deep background */
                        'dark-card': '#161B22', /* Card background */
                        'dark-hover': '#21262D', /* Hover state */
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Orbitron', 'sans-serif'],
                    },
                    boxShadow: {
                        'neon-green': '0 0 8px rgba(57, 255, 20, 0.4)',
                        'neon-yellow': '0 0 8px rgba(255, 215, 0, 0.4)',
                        'neon-red': '0 0 8px rgba(255, 7, 58, 0.4)',
                        'app-focus': '0 0 15px rgba(0, 191, 255, 0.4)',
                        'prompt-pop': '0 0 20px rgba(0, 191, 255, 0.8), 0 0 8px rgba(0, 191, 255, 1)', 
                        'green-glow': '0 0 10px rgba(57, 255, 20, 0.6)',
                        'blue-glow': '0 0 15px rgba(0, 191, 255, 0.8)',
                    }
                }
            }
        }

        /* Base styles for the app shell */
        body {
            background-color: #0D1117;
            color: #E6E8EA;
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 0;
            margin: 0;
            font-family: 'Inter', sans-serif;
            overflow: hidden; 
        }

        /* Styling for the main content area to enable scrolling */
        #app-main {
            flex-grow: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding-top: 1rem; 
            padding-bottom: 5rem; 
        }

        /* App Wrapper (Main content container - now always visible) */
        #app-wrapper {
            flex-grow: 1; 
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        /* Status Pill Styling - App-like, structured */
        .status-pill {
            padding: 0.35rem 0.8rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.7rem;
            letter-spacing: 0.05em;
            display: inline-flex;
            align-items: center;
            line-height: 1;
            text-transform: uppercase;
        }
        
        /* Utility for the dot inside the pill */
        .status-dot-sm {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
        }

        /* Style for the app-like card */
        .app-card {
            border: 1px solid #161B22; 
            transition: all 0.2s;
        }

        .app-card:hover {
            border-color: rgba(0, 191, 255, 0.4);
            box-shadow: 0 0 12px rgba(0, 191, 255, 0.2);
            background-color: #1a2028; 
        }
        
        /* Specific glow for location cards */
        .location-card-glow {
            box-shadow: 0 0 15px rgba(0, 191, 255, 0.4); 
            border-color: rgba(0, 191, 255, 0.5); 
        }

/* --- Solid Black Bottom Navigation Bar (Seamless Buttons) --- */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 70px;
    background-color: #000000 !important; /* solid black */
    opacity: 1 !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 10000;
    box-shadow: 0 -2px 15px rgba(0, 191, 255, 0.4); /* blue glow */
    border: none;
}

/* --- Nav Buttons --- */
.nav-btn {
    all: unset; /* ðŸ”¥ removes ALL default browser button styles */
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: #4D5763;
    background-color: #000000; /* same as nav bar */
    height: 100%;
    cursor: pointer;
    transition: color 0.2s, text-shadow 0.2s;
}

/* --- Active Button --- */
.nav-btn.active {
    color: #00BFFF;
    text-shadow: 0 0 8px rgba(0, 191, 255, 0.8);
}

/* --- Page Visibility --- */
.page-content {
    display: none;
}
.page-content.active {
    display: block;
}



       #install-prompt {
    position: fixed;
    bottom: 4rem; 
    left: 50%;
    transform: translateX(-50%);
    max-width: 90%;
    z-index: 100;
    display: block;          /* ensure it's visible */
    opacity: 1;              /* fully solid */
    background-color: #1e1e1e; /* solid dark background */
    color: white;            /* text color */
    border: 2px solid #1d4ed8; /* solid blue border */
    box-shadow: 0 0 15px #1d4ed8; /* blue glow around the card */
    border-radius: 1rem;
    padding: 1.5rem 1.8rem;
    transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
}

#install-prompt:hover {
    box-shadow: 0 0 25px #1d4ed8; /* stronger glow on hover */
}

        #install-prompt.visible {
            opacity: 1;
        }

        /* Input styling for the control panel */
        .control-input {
            background-color: #0D1117;
            border: 1px solid #00BFFF;
            color: #FFFFFF;
            font-family: 'Orbitron', monospace;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            transition: all 0.2s;
            letter-spacing: 0.2em; /* Emphasize input for code */
        }
        .control-input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.8);
            border-color: #00BFFF;
        }
        
        /* iOS Share Icon SVG */
        .share-icon-svg {
            width: 20px;
            height: 20px;
            margin-right: 4px;
            vertical-align: middle;
            display: inline-block;
        }
        
        .sim-btn-force {
            background-color: #00BFFF;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.4);
            color: #0D1117;
        }
        .sim-btn-force:hover {
            background-color: #38c8ff;
        }
    </style>
</head>
<body class="font-sans">

    <!-- MAIN APPLICATION WRAPPER (Now always visible) --><div id="app-wrapper">

        <!-- Header with new text logo --><header id="app-header" class="bg-dark-card p-4 border-b border-matrix-blue/40 shadow-2xl sticky top-0 z-10">
            <div class="max-w-xl mx-auto flex justify-between items-center">
                
                <!-- New Text Logo --><span class="text-xl font-display text-matrix-blue font-bold">FlightFeed.uk</span>
                <div class="flex items-center space-x-2">
                    <span class="text-xs text-matrix-blue/70">SYSTEM:</span>
                    <span id="system-status" class="text-neon-green font-bold text-sm">LIVE FEED</span>
                    <div class="w-2 h-2 rounded-full bg-neon-green shadow-neon-green animate-pulse"></div>
                </div>
            </div>
        </header>

        <!-- Main Content Area --><main id="app-main" class="max-w-xl mx-auto w-full px-4 sm:px-6">
            
            <div id="page-container" class="space-y-4">

                <!-- Zones Page --><section id="page-zones" data-page-name="Zones" class="page-content active">
                    <br>
                    <h1 class="text-xl font-display font-light text-matrix-blue mb-4 pb-2 border-b border-matrix-blue/20">
                        Cardiff & Vale Flight Zones
                    </h1>
                
                  <div class="bg-dark-card p-3 rounded-lg mb-6 shadow-lg border border-matrix-blue/20">
                        <h2 class="text-sm font-bold text-matrix-blue mb-2">System Key:</h2>
                        <div class="grid grid-cols-3 gap-2 text-xs">
                            <div class="flex items-center space-x-1">
                                <span class="w-2 h-2 rounded-full bg-neon-green shadow-neon-green"></span>
                                <span class="text-neon-green font-semibold">SAFE</span>
                            </div>
                            <div class="flex items-center space-x-1">
                                <span class="w-2 h-2 rounded-full bg-electric-yellow shadow-neon-yellow"></span>
                                <span class="text-electric-yellow font-semibold">MODERATE / CAUTION</span>
                            </div>
                            <div class="flex items-center space-x-1">
                                <span class="w-2 h-2 rounded-full bg-danger-red shadow-neon-red"></span>
                                <span class="text-danger-red font-semibold">UNSAFE / RESTRICTED</span>
                            </div>
                        </div>
                    </div>
                     <h3 style="font-weight:bold; color:#0033cc; text-shadow: 0 0 2px #0033cc, 0 0 4px #0033cc, 0 0 8px #0033cc;">
  please check permits before you fly thank you
</h3>
                    
                    <section id="location-container" class="space-y-4"></section>
                </section>

                <!-- Forecast Page --><section id="page-forecast" data-page-name="Forecast" class="page-content">
                    <h1 class="text-xl font-display font-light text-matrix-blue mb-4 pb-2 border-b border-matrix-blue/20">
                        UAV 7-Day Flight Forecast (Live Feed)
                    </h1>
                    <p class="text-sm text-gray-400 mb-6" id="forecast-source">Source: WeatherAPI. Last Update: <span id="last-update-time">...</span></p>
                    
                    <section id="forecast-details-container" class="space-y-4">
                        <!-- Content will be rendered here --></section>
                </section>

                <!-- Alerts Page --><section id="page-alerts" data-page-name="Alerts" class="page-content">
                    <h1 class="text-xl font-display font-light text-matrix-blue mb-4 pb-2 border-b border-matrix-blue/20">
                        Active Flight Advisories & Warnings
                    </h1>
                    <p class="text-sm text-gray-400 mb-6">Essential NOTAMs and system warnings affecting local airspace.</p>

                    <section id="alerts-container" class="space-y-4"></section>
                </section>
                
                <!-- Control Page (Now contains internal lock logic) --><section id="page-control" data-page-name="Control" class="page-content">
                    <h1 class="text-xl font-display font-light text-matrix-blue mb-4 pb-2 border-b border-matrix-blue/50">
                        SYSTEM & FLIGHT CONTROL
                    </h1>
                    
                    <!-- Control Lock Form (Visible until unlocked) --><div id="control-lock-form" class="max-w-md mx-auto bg-dark-card p-6 rounded-xl shadow-blue-glow border border-danger-red/50">
                        <h2 class="text-2xl font-display font-bold text-danger-red mb-2">RESTRICTED ACCESS</h2>
                        <p class="text-sm text-electric-yellow mb-6">
                            Access to System Controls requires a valid 4-digit security key.
                        </p>
                        
                        <input type="password" id="control-secret-code" class="control-input w-full text-center text-xl mb-4" placeholder="-- CODE --" maxlength="4">
                        
                        <button id="control-unlock-btn" class="w-full bg-danger-red hover:bg-danger-red/80 text-white font-bold py-4 rounded-lg shadow-neon-red transition duration-200 font-display uppercase text-lg">
                            GRANT ACCESS
                        </button>
                        
                        <div id="control-lock-status" class="text-center text-sm font-semibold pt-4 hidden"></div>
                    </div>

                    <!-- Control Panel Content (Hidden until unlocked) --><div id="control-panel-content" class="hidden">
                        <p class="text-sm text-electric-yellow mb-6">
                            Manage data feed and apply local overrides for today's flight plan.
                        </p>

                        <div class="bg-dark-card p-6 rounded-xl shadow-2xl border border-matrix-blue/30 space-y-6">
                            
                            <!-- Live Data Refresh Control --><div class="space-y-3 border-b border-matrix-blue/20 pb-4">
                                <h2 class="text-lg font-display text-white">Live Data Feed Control</h2>
                                <p class="text-xs text-gray-400/80">
                                    Fetch the latest 7-day forecast from the secure WeatherAPI feed.
                                </p>
                                <button id="refresh-live-data-btn" class="w-full sim-btn-force text-dark-bg font-bold py-3 rounded-lg shadow-app-focus transition duration-200 font-display uppercase">
                                    REFRESH LIVE DATA FEED
                                </button>
                            </div>

                            <!-- Current Day Override --><div class="space-y-4">
                                <h2 class="text-lg font-display text-white">Local Wind Override (Day 1)</h2>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="flex flex-col">
                                        <label for="input-wind-speed" class="text-sm font-semibold text-matrix-blue mb-1">Base Wind Speed</label>
                                        <input type="number" id="input-wind-speed" class="control-input" min="0" max="100" placeholder="13">
                                        <p class="text-xs text-gray-500 mt-1">13 mph or less = SAFE</p>
                                    </div>
                                    <div class="flex flex-col">
                                        <label for="input-gust-speed" class="text-sm font-semibold text-matrix-blue mb-1">Gust Speed</label>
                                        <input type="number" id="input-gust-speed" class="control-input" min="0" max="100" placeholder="19">
                                        <p class="text-xs text-gray-500 mt-1">19 mph or more = UNSAFE</p>
                                    </div>
                                </div>

                                <button id="update-forecast-btn" class="w-full bg-matrix-blue hover:bg-matrix-blue/80 text-dark-bg font-bold py-3 rounded-lg shadow-app-focus transition duration-200 font-display uppercase">
                                    APPLY DAY 1 OVERRIDE
                                </button>
                            </div>
                            
                            <div id="update-status" class="text-center text-sm font-semibold pt-3 hidden"></div>
                        </div>
                    </div>
                </section>

            </div>
        </main>
        
        <!-- PWA Install Prompt --><div id="install-prompt" class="bg-dark-card text-white p-3 rounded-xl shadow-prompt-pop border border-matrix-blue/50">
            <div class="flex justify-between items-center mb-2">
                <span class="font-bold text-sm">Install FlightFeed App (iOS)</span>
                <button id="close-prompt" class="text-lg font-bold p-1 leading-none text-gray-400 hover:text-danger-red transition duration-150">
                    &times;
                </button>
            </div>
            <p class="text-xs font-semibold">
                To install: Tap the 
                <svg class="share-icon-svg text-white" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" x2="12" y1="2" y2="15"/></svg>
                <span class="font-bold text-matrix-blue">Share icon</span>, then select **'Add to Home Screen'**.
            </p>
        </div>

        <!-- Bottom Navigation Bar --><footer class="fixed bottom-0 w-full bg-dark-bg border-t-2 border-matrix-blue z-50 shadow-2xl shadow-matrix-blue/50">
            <div class="max-w-xl mx-auto flex justify-around items-center h-14 text-xs font-medium">
                <a href="#" id="nav-zones" data-page="Zones" class="nav-btn active">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin"><path d="M12 21.75l-4.5-5.5a7 7 0 1 1 9 0l-4.5 5.5z"/><circle cx="12" cy="10" r="3"/></svg>
                    <span class="mt-1">Zones</span>
                </a>
                <a href="#" id="nav-forecast" data-page="Forecast" class="nav-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gauge"><path d="M12 14v4"/><path d="M15.5 16.5l2.5 2.5"/><path d="M8.5 16.5l-2.5 2.5"/><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z"/><path d="M12 12c-3.3 0-6-2.7-6-6"/></svg>
                    <span class="mt-1">Forecast</span>
                </a>
                <a href="#" id="nav-alerts" data-page="Alerts" class="nav-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bell"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
                    <span class="mt-1">Alerts</span>
                </a>
                <a href="#" id="nav-control" data-page="Control" class="nav-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cpu"><rect width="16" height="16" x="4" y="4" rx="2"/><rect width="6" height="6" x="9" y="9" rx="1"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/><path d="M9 2v2"/><path d="M9 20v2"/></svg>
                    <span class="mt-1">Control</span>
                </a>
            </div>
        </footer>
    </div>

<!-- App Script --><script type="text/javascript">
    
    // --- API CONFIGURATION ---
    const API_KEY = '0e7e5b27f8c04153866221152250311'; 
    const LOCATION = 'Cardiff, UK';
    const API_URL = `https://api.weatherapi.com/v1/forecast.json?key=${API_KEY}&q=${LOCATION}&days=7`;
    
    // --- PERSISTENCE KEYS & GLOBALS ---
    const OVERRIDE_STORAGE_KEY = 'uav_sim_day1_override';
    const LAST_FETCH_TIME_KEY = 'uav_sim_last_fetch_time';
    const SECRET_CODE = 3040; // Security Code for the Control page
    
    // Global state to track if the Control panel has been unlocked in the current session
    let isControlUnlocked = false; 
    
    // This variable will hold the live 7-day forecast data fetched from the API
    let currentForecastData = [];
    let day1Override = null;
    let lastFetchTime = null;
    let isFetching = false;
    
    // Default initial mock data while API is loading or fails
    const defaultMockForecast = [
        { wind_speed: 13, gust_speed: 19, temp: 15, rain: 40, direction: "SW", pressure: 1012, solar: "MED" },
        { wind_speed: 8, gust_speed: 12, temp: 16, rain: 10, direction: "W", pressure: 1016, solar: "MED" },
        { wind_speed: 5, gust_speed: 8, temp: 17, rain: 0, direction: "N", pressure: 1020, solar: "HIGH" },
        { wind_speed: 18, gust_speed: 26, temp: 14, rain: 70, direction: "NW", pressure: 1008, solar: "LOW" },
        { wind_speed: 10, gust_speed: 15, temp: 13, rain: 5, direction: "SE", pressure: 1018, solar: "MED" },
        { wind_speed: 7, gust_speed: 11, temp: 15, rain: 0, direction: "E", pressure: 1022, solar: "HIGH" },
        { wind_speed: 15, gust_speed: 22, temp: 12, rain: 50, direction: "SW", pressure: 1005, solar: "LOW" }
    ];

    // --- MOCK ZONE AND ALERT DATA (Remains static) ---
const locationData = [
    { id: 1, name: "Cardiff Bay Barrage", area: "Cardiff Bay", coords: "51.45N, -3.16W", nfz_status: 'CAUTION', notes: "Wind is often higher near the coast. Requires awareness of local Port Authority / Bay Byelaws." },
    { id: 2, name: "Trellai Park", area: "Llanrumney", coords: "51.50N, -3.12W", nfz_status: 'OPEN', notes: "Good open space. Standard Drone Code applies (VLOS, 400ft max)." },
    { id: 5, name: "Cardiff Airport FRZ", area: "Rhoose (Warning)", coords: "51.39N, -3.34W", nfz_status: 'RESTRICTED', notes: "STRICT NO-FLY ZONE. Within Flight Restriction Zone (FRZ). Do NOT attempt flight." },
    { id: 11, name: "Penarth Pier Head", area: "Penarth Coast", coords: "51.43N, -3.16W", nfz_status: 'CAUTION', notes: "Strong sea breeze expected. High chance of salt spray. Base wind risk will be applied from simulation." },
    { id: 29, name: "Ogmore-by-Sea", area: "Bridgend Coast (Vale)", coords: "51.46N, -3.61W", nfz_status: 'CAUTION', notes: "Strong sea winds. Suitable for experienced pilots only. Watch tide line. Base wind risk will be applied from simulation." },
    { id: 33, name: "Cardiff Central Train Station", area: "City Centre", coords: "51.47N, -3.18W", nfz_status: 'RESTRICTED', notes: "Critical transport infrastructure. Rail and high public risk. **Do NOT fly** without explicit Network Rail/Police permission." },
    { id: 35, name: "Roath Park Lake", area: "Roath", coords: "51.49N, -3.15W", nfz_status: 'OPEN', notes: "Good open space. Check for local events or crowds." },
    { id: 40, name: "Bute Park South", area: "City Centre Fringe", coords: "51.48N, -3.18W", nfz_status: 'CAUTION', notes: "High pedestrian volume, especially weekends. Maintain 50m separation from people/buildings." },
    { id: 41, name: "Garth Mountain Summit", area: "Taff's Well", coords: "51.54N, -3.27W", nfz_status: 'CAUTION', notes: "High altitude, turbulent air. Strong mountain winds often add +5mph to base forecast." },
    { id: 42, name: "Llandaff Cathedral Area", area: "Llandaff", coords: "51.49N, -3.22W", nfz_status: 'RESTRICTED', notes: "Historic structure protection zone. Permission from site management is mandatory." },
    { id: 43, name: "St. Fagans Museum", area: "St. Fagans", coords: "51.48N, -3.28W", nfz_status: 'RESTRICTED', notes: "No overflight permitted due to protected buildings and visitor safety regulations." },
    { id: 44, name: "Sully Island Coast", area: "Sully", coords: "51.40N, -3.20W", nfz_status: 'CAUTION', notes: "Tidal movements are rapid. Launch/Recovery must be planned around the tide. High winds likely." },
    { id: 45, name: "Newport Wetlands Reserve", area: "Newport", coords: "51.55N, -2.96W", nfz_status: 'RESTRICTED', notes: "RSPB Nature Reserve. STRICTLY NO FLYING due to wildlife disturbance." },
    { id: 46, name: "Taff Trail (Radyr)", area: "Northern Cardiff", coords: "51.52N, -3.22W", nfz_status: 'CAUTION', notes: "Linear path next to private land and river. Maintain low altitude and respect privacy." },
    { id: 47, name: "Porthcawl Seafront", area: "Porthcawl", coords: "51.48N, -3.71W", nfz_status: 'CAUTION', notes: "Seafront area. Gale-force gusts possible. Only heavy, professional rigs should be flown." },
    { id: 48, name: "Barry Island Pleasure Park", area: "Barry", coords: "51.39N, -3.28W", nfz_status: 'RESTRICTED', notes: "High public density and major attraction. Do not fly over crowds or rides." },
    { id: 49, name: "Caerphilly Castle", area: "Caerphilly", coords: "51.57N, -3.22W", nfz_status: 'RESTRICTED', notes: "Protected historical site. CAA Article 241 rules apply. Permission needed." },
    { id: 50, name: "Tredegar Park", area: "Newport", coords: "51.57N, -3.05W", nfz_status: 'OPEN', notes: "Large open park suitable for recreational flying. Check for local events." },
    { id: 51, name: "Pontcanna Fields", area: "Cardiff", coords: "51.48N, -3.20W", nfz_status: 'CAUTION', notes: "Often used for sports and grazing. Monitor for horses and sporting events." },
    { id: 52, name: "Ely Bridge Junction", area: "Western Cardiff", coords: "51.47N, -3.25W", nfz_status: 'RESTRICTED', notes: "Proximity to high-speed road (A4232). High risk of distracted driving. AVOID." },
    { id: 53, name: "HMS Cambria Reserve", area: "Sully (Military)", coords: "51.41N, -3.17W", nfz_status: 'RESTRICTED', notes: "Military airspace/establishment. Immediate grounding and police report if observed flying." },
    { id: 54, name: "Heath Park", area: "Cardiff", coords: "51.51N, -3.18W", nfz_status: 'OPEN', notes: "Low wind, excellent conditions. Avoid hospital heli-route nearby." },
    { id: 55, name: "Blackwood Showground", area: "Blackwood", coords: "51.64N, -3.17W", nfz_status: 'OPEN', notes: "Large, unobstructed area. Ideal for testing and training." },
    { id: 56, name: "Brecon Beacons National Park (central)", area: "Brecon Beacons", coords: "51.88N, -3.45W", nfz_status: 'CAUTION', notes: "Central beacon area. Mountain winds and ridges. Use caution." },
    { id: 57, name: "Watkiss Way", area: "Cardiff Bay", coords: "51.4507N, -3.1788W", nfz_status: 'OPEN', notes: "Grassy launch areas along the bay. Good VLOS opportunities." },
    { id: 58, name: "St Mellons Fields", area: "St Mellons", coords: "51.5050N, -3.0760W", nfz_status: 'OPEN', notes: "Open fields in St Mellons â€” candidate for low-altitude flights." },
    { id: 59, name: "Rumney Meadows", area: "Rumney", coords: "51.4980N, -3.1400W", nfz_status: 'OPEN', notes: "Meadow / grassland in Rumney area." },
    { id: 60, name: "Libanus Visitor Centre", area: "Brecon Beacons", coords: "51.5630N, -3.2820W", nfz_status: 'CAUTION', notes: "Visitor centre in Brecon Beacons NP, good base point." },
    { id: 61, name: "Pen y Fan (Peak)", area: "Brecon Beacons", coords: "51.4960N, -3.1430W", nfz_status: 'CAUTION', notes: "Well-known Beacons peak; watch hikers." },
    { id: 62, name: "Mynydd Llangorse", area: "Brecon Beacons / Black Mountains", coords: "51.8000N, -3.2700W", nfz_status: 'CAUTION', notes: "Hill in Black Mountains, open country area." },
    { id: 63, name: "Fan Bwlch Chwyth", area: "Brecon Beacons", coords: "51.8000N, -3.4000W", nfz_status: 'CAUTION', notes: "Peak in Fforest Fawr region." },
    { id: 64, name: "Cribarth (Sleeping Giant)", area: "Brecon Beacons", coords: "51.7630N, -3.5210W", nfz_status: 'CAUTION', notes: "Mapped hill in Beacons, open area." },
    { id: 65, name: "Bryn Arw", area: "Black Mountains", coords: "51.8000N, -3.0000W", nfz_status: 'CAUTION', notes: "Hill in Monmouthshire side of Black Mountains." },
    { id: 66, name: "Dunraven Bay", area: "Southerndown / Vale of Glamorgan", coords: "51.4800N, -3.5730W", nfz_status: 'CAUTION', notes: "Coastal area, tidal caution." },
    { id: 67, name: "Nash Point Lighthouse", area: "Vale of Glamorgan", coords: "51.4260N, -3.5670W", nfz_status: 'CAUTION', notes: "Lighthouse and cliff area; safe for high vantage aerial shots." },
    { id: 68, name: "Barry Waterfront / Docklands", area: "Barry", coords: "51.3960N, -3.2980W", nfz_status: 'CAUTION', notes: "Urban dockside, watch local regulations." },
    { id: 69, name: "Mynydd y Garn", area: "Caerphilly / outskirts", coords: "51.5800N, -3.2100W", nfz_status: 'CAUTION', notes: "Small hill near Caerphilly; open country access." },
    { id: 70, name: "Cwmcarn Forest", area: "Caerphilly", coords: "51.6360N, -3.1650W", nfz_status: 'CAUTION', notes: "Forest with open tracks; good for FPV / practice flights." }
];



const alertData = [
    {
        id: 1,
        type: 'TEMPORARY FLIGHT RESTRICTION',
        area: 'CARDIFF BAY CENTRE',
        priority: 'HIGH',
        details: 'Public event (Regatta) TFR applies to all UAS up to 400ft AGL within 0.5nm radius.',
        date: '2025-11-04'
    },
    {
        id: 2,
        type: 'TEMPORARY FLIGHT RESTRICTION',
        area: 'BARRY ISLAND',
        priority: 'HIGH',
        details: 'Music festival and crowd area. No drone flights within 0.5nm of main stages until 20:00.',
        date: '2025-11-05'
    },
    {
        id: 3,
        type: 'MANDATORY FRZ CHECK',
        area: 'CARDIFF AIRPORT',
        priority: 'CRITICAL',
        details: 'The Airport FRZ boundary has been updated. ALL flight plans near Rhoose must be re-validated with the new map data.',
        date: '2025-11-03'
    },
    {
        id: 4,
        type: 'ADVISORY',
        area: 'TREDEGAR PARK, NEWPORT',
        priority: 'MEDIUM',
        details: 'Large public event (sports) this weekend; maintain 50m horizontal separation from crowds.',
        date: '2025-11-06'
    },
    {
        id: 5,
        type: 'TEMPORARY FLIGHT RESTRICTION',
        area: 'CAERPHILLY CASTLE',
        priority: 'HIGH',
        details: 'Special historical event; drones prohibited within castle grounds until further notice.',
        date: '2025-11-04'
    },
    {
        id: 6,
        type: 'ADVISORY',
        area: 'BRECON BEACONS - PEN Y FAN',
        priority: 'MEDIUM',
        details: 'High winds reported; pilots advised to limit altitude to 300ft AGL in exposed areas.',
        date: '2025-11-04'
    },
    {
        id: 7,
        type: 'TEMPORARY FLIGHT RESTRICTION',
        area: 'CARDIFF CITY CENTRE',
        priority: 'HIGH',
        details: 'Official parade & drone ban from 10:00â€“14:00; 0.5nm radius around central square.',
        date: '2025-11-07'
    },
    {
        id: 12,
        type: 'SWARM DISPLAY PROHIBITION CLARIFICATION',
        area: 'UK (All airspace)',
        priority: 'MEDIUM',
        details: 'The CAA clarifies that use of UAS swarms for commercial advertising (e.g. logos or QR codes) is prohibited under section 82 of the Civil Aviation Act 1982. <a href="https://www.caa.co.uk/drones/drones-news-and-updates/news-and-updates/" target="_blank" style="color:blue;">https://www.caa.co.uk/drones/drones-news-and-updates/news-and-updates/</a>',
        date: '2025-12-01'
    },
    {
        id: 8,
        type: 'PRODUCT STANDARDS CHANGE',
        area: 'UK (Open Category)',
        priority: 'CRITICAL',
        details: 'From 1 January 2026, drones in the Open Category must meet new product standards under a UK class marking (UK0â€“UK6) framework. The CAA will act as Market Surveillance Authority. <a href="https://www.caa.co.uk/newsroom/news/uk-civil-aviation-authority-appointed-to-oversee-safety-standards-for-drones/" target="_blank" style="color:blue;">https://www.caa.co.uk/newsroom/news/uk-civil-aviation-authority-appointed-to-oversee-safety-standards-for-drones/</a>',
        date: '2026-01-01'
    },
    {
        id: 9,
        type: 'REMOTE ID / GEO-AWARENESS REQUIREMENT',
        area: 'UK (Classed Drones)',
        priority: 'HIGH',
        details: 'From 1 January 2026, UK1, UK2, UK3 (and some higher) class-marked drones must broadcast Direct Remote ID and support geo-awareness in flight. <a href="https://www.heliguy.com/blogs/posts/uk-caa-proposed-drone-regulation-changes/" target="_blank" style="color:blue;">https://www.heliguy.com/blogs/posts/uk-caa-proposed-drone-regulation-changes/</a>',
        date: '2026-01-01'
    },
    {
        id: 10,
        type: 'FLYER ID EXPANSION',
        area: 'UK (â‰¥100g Drones)',
        priority: 'HIGH',
        details: 'From 1 January 2026, any drone over 100â€¯g will require the operator to obtain a Flyer ID (online test). <a href="https://www.caa.co.uk/drones/drones-news-and-updates/news-and-updates/" target="_blank" style="color:blue;">https://www.caa.co.uk/drones/drones-news-and-updates/news-and-updates/</a>',
        date: '2026-01-01'
    },
    {
        id: 11,
        type: 'TRANSITION LEGACY EXTENSION',
        area: 'UK (Legacy / transitional drones)',
        priority: 'MEDIUM',
        details: 'The transitional / legacy rules for existing drones have been extended through 1 January 2026, allowing non-classâ€‘marked drones to continue under existing Open Category rules until then. <a href="https://www.arpas.uk/open-cat-transition-period-extended-to-1-jan-2026-and-its-implications/" target="_blank" style="color:blue;">https://www.arpas.uk/open-cat-transition-period-extended-to-1-jan-2026-and-its-implications/</a>',
        date: '2026-01-01'
    },
    {
        id: 13,
        type: 'CLASS MARKING LABEL CHANGE',
        area: 'UK (Class-marked drones)',
        priority: 'HIGH',
        details: 'The UK will adopt UK-specific classâ€‘mark labels (UK0, UK1, etc.), replacing EU C0â€“C6 labels. EU classâ€‘marked drones will be acceptable under transitional rules until Jan 2028. <a href="https://www.heliguy.com/blogs/posts/uk-caa-proposed-drone-regulation-changes/" target="_blank" style="color:blue;">https://www.heliguy.com/blogs/posts/uk-caa-proposed-drone-regulation-changes/</a>',
        date: '2026-01-01'
    },
    {
        id: 14,
        type: 'NIGHT-FLIGHT LIGHT REQUIREMENT',
        area: 'UK (Open Category at night)',
        priority: 'HIGH',
        details: 'Under planned changes, drones flown at night in Open Category must display a flashing anti-collision light. <a href="https://www.heliguy.com/blogs/posts/uk-caa-proposed-drone-regulation-changes/" target="_blank" style="color:blue;">https://www.heliguy.com/blogs/posts/uk-caa-proposed-drone-regulation-changes/</a>',
        date: '2026-01-01'
    }
];



    // --- FETCH LOGIC (USING REAL WEATHERAPI) ---

    /**
     * Fetches the 7-day forecast from WeatherAPI and maps the data to our internal structure.
     */
    async function fetchRealWeatherForecast() {
        if (isFetching) return;
        isFetching = true;

        const statusDiv = document.getElementById('update-status');
        const refreshButton = document.getElementById('refresh-live-data-btn');
        
        if (refreshButton) {
            refreshButton.textContent = 'FETCHING LIVE DATA...';
            refreshButton.disabled = true;
        }

        if (statusDiv) {
            statusDiv.innerHTML = 'Fetching new data feed from WeatherAPI...';
            statusDiv.className = 'text-center text-sm font-semibold pt-3 text-electric-yellow shadow-neon-yellow block';
        }

        try {
            const response = await fetch(API_URL);
            
            if (!response.ok) {
                 throw new Error(`WeatherAPI returned status: ${response.status}`);
            }
            
            const data = await response.json();
            
            if (!data.forecast || !Array.isArray(data.forecast.forecastday) || data.forecast.forecastday.length < 7) {
                 throw new Error("Invalid forecast data structure received.");
            }
            
            // Fixed rotation lists for data points not provided in the daily summary
            const directions = ["SW", "W", "N", "NW", "SE", "E", "S"];
            const pressures = [1015, 1010, 1008, 1020, 1012, 1018, 1005];
            const solarValues = ["MED", "HIGH", "HIGH", "LOW", "MED", "HIGH", "LOW"];

            // Map WeatherAPI structure to our internal app structure
            const newForecastData = data.forecast.forecastday.map((dayData, index) => {
                const maxWind = dayData.day.maxwind_mph;
                
                return {
                    // Actual WeatherAPI Data
                    wind_speed: Math.round(maxWind),
                    temp: Math.round(dayData.day.avgtemp_c),
                    rain: dayData.day.daily_chance_of_rain, // In percent
                    
                    // Simulated/Estimated Data (for UAV risk model completeness)
                    gust_speed: Math.round(maxWind * 1.5), // Simulating gust as 1.5x max wind
                    direction: directions[index % directions.length],
                    pressure: pressures[index % pressures.length],
                    solar: solarValues[index % solarValues.length],
                };
            });
            
            // Update global state and persist fetch time
            currentForecastData = newForecastData;
            lastFetchTime = Date.now();
            localStorage.setItem(LAST_FETCH_TIME_KEY, lastFetchTime.toString());
            
            // Apply any local Day 1 override if it exists
            if (day1Override) {
                currentForecastData[0].wind_speed = day1Override.wind_speed;
                currentForecastData[0].gust_speed = day1Override.gust_speed;
            }

            // Success message
            if (statusDiv) {
                statusDiv.innerHTML = `LIVE DATA REFRESHED. Last fetch at ${formatTime(lastFetchTime)}.`;
                statusDiv.className = 'text-center text-sm font-semibold pt-3 text-neon-green shadow-green-glow block';
            }

        } catch (error) {
            console.error("Failed to fetch live weather data:", error);
            currentForecastData = defaultMockForecast; // Fallback to mock data
            if (statusDiv) {
                statusDiv.innerHTML = `ERROR: Failed to fetch live data (${error.message}). Using fallback mock data.`;
                statusDiv.className = 'text-center text-sm font-semibold pt-3 text-danger-red shadow-neon-red block';
            }
        } finally {
            isFetching = false;
            
            // Restore button state
            if (refreshButton) {
                refreshButton.textContent = 'REFRESH LIVE DATA FEED';
                refreshButton.disabled = false;
            }

            // Re-render the active page to show changes
            const activePageElement = document.querySelector('.page-content.active');
            if (activePageElement) {
                const activePage = activePageElement.getAttribute('data-page-name');
                changePage(activePage); 
            }
            
            // Hide status message after a delay
            if (statusDiv) {
                setTimeout(() => {
                    statusDiv.classList.add('hidden');
                    statusDiv.classList.remove('shadow-green-glow', 'shadow-neon-red');
                }, 3000);
            }
        }
    }
    
    function loadInitialState() {
        try {
            const savedOverride = localStorage.getItem(OVERRIDE_STORAGE_KEY);
            day1Override = savedOverride ? JSON.parse(savedOverride) : null;
            
            const savedTime = localStorage.getItem(LAST_FETCH_TIME_KEY);
            lastFetchTime = savedTime ? parseInt(savedTime) : null;
            
        } catch (e) {
            console.error("Could not load local state.", e);
            day1Override = null;
            lastFetchTime = null;
        }

        // Use default mock data until the real fetch completes
        currentForecastData = defaultMockForecast;
    }

    function saveDay1Override(wind, gust) {
        day1Override = { wind_speed: wind, gust_speed: gust };
        try {
            localStorage.setItem(OVERRIDE_STORAGE_KEY, JSON.stringify(day1Override));
        } catch (e) {
            console.error("Could not save Day 1 override to localStorage.", e);
        }
    }
    
    // --- UTILITIES ---

    // Function to get the correct day name (MON, TUE, etc.) based on index
    function getDayName(index) {
        const days = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
        const todayIndex = new Date().getDay(); // 0 for Sunday, 1 for Monday
        const targetIndex = (todayIndex + index) % 7;
        return days[targetIndex];
    }
    
    // Formats a date object into a human-readable string (e.g., Nov 3, 2025 at 10:00 PM)
    function formatTime(timestamp) {
        if (!timestamp) return 'N/A';
        const date = new Date(timestamp);
        return date.toLocaleString('en-GB', {
            month: 'short',
            day: 'numeric',
            year: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            hour12: true
        });
    }

    function getEffectiveWindSpeed(baseWindSpeed, locationName) {
        let effectiveWind = baseWindSpeed;

        if (locationName.includes('Bay Barrage') || locationName.includes('Pier Head') || locationName.includes('Sully Island')) {
            effectiveWind += 3; 
        } else if (locationName.includes('Garth Mountain') || locationName.includes('Brecon Beacons')) {
            effectiveWind += 7; 
        }
        
        return effectiveWind;
    }

    function getUAVFlightRisk(windSpeed, gustSpeed) {
        if (windSpeed === null || isNaN(windSpeed)) {
             return { status: 'UNKNOWN', color: 'text-gray-400', shadow: 'shadow-none', bgColor: 'bg-gray-400/20', icon: '' };
        }
        
        // Unsafe conditions: Base wind >= 19mph OR Gusts >= 25mph
        if (windSpeed >= 19 || gustSpeed >= 25) { 
            return {
                status: 'UNSAFE',
                color: 'text-danger-red',
                shadow: 'shadow-neon-red',
                bgColor: 'bg-danger-red/20',
                icon: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wind"><path d="M17.74 3.34a7 7 0 0 0-11.48 4"/><path d="M2.57 14.5a6 6 0 0 1 11.85-2.22"/><path d="M4.68 8.61a5 5 0 0 1 8.87 2.03"/><path d="M12 21v-8"/></svg>'
            };
        } 
        
        // Moderate/Caution conditions: Base wind 14-18mph OR Gusts 19-24mph
        else if (windSpeed >= 14 || gustSpeed >= 19) {
            return {
                status: 'MODERATE',
                color: 'text-electric-yellow',
                shadow: 'shadow-neon-yellow',
                bgColor: 'bg-electric-yellow/20',
                icon: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cloud-wind"><path d="M12.55 18a2 2 0 0 1-1.39-2"/><path d="M16 16.2a2 2 0 0 1-3.2-.2"/><path d="M6 18H4a2 2 0 0 1-2-2"/><path d="M14.58 4.09A5.8 5.8 0 0 0 13 4c-2.48 0-4.7 1.15-6.13 2.91a2 2 0 0 0-2.11.19A3.5 3.5 0 0 0 5 13h10a4 4 0 0 0 0-8.5"/><path d="M22 17H10"/></svg>'
            };
        } 
        
        // Safe conditions: Base wind <= 13mph AND Gusts <= 18mph
        else {
            return {
                status: 'SAFE',
                color: 'text-neon-green',
                shadow: 'shadow-neon-green',
                bgColor: 'bg-neon-green/20',
                icon: '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun-medium"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="M4.93 4.93l1.41 1.41"/><path d="M17.66 17.66l1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="M6.34 17.66l-1.41 1.41"/><path d="M19.07 4.93l-1.41 1.41"/></svg>'
            };
        }
    }

    function getNFZStyle(status) {
        if (status === 'RESTRICTED') {
            return {
                statusText: 'NO-FLY ZONE',
                color: 'text-danger-red',
                shadow: 'shadow-neon-red',
                bgColor: 'bg-danger-red/20',
                dotColor: 'bg-danger-red',
            };
        } else if (status === 'CAUTION') {
            return {
                statusText: 'CAUTION: PERMIT/RULES',
                color: 'text-electric-yellow',
                shadow: 'shadow-neon-yellow',
                bgColor: 'bg-electric-yellow/20',
                dotColor: 'bg-electric-yellow',
            };
        } else {
            return {
                statusText: 'OPEN ZONE',
                color: 'text-neon-green',
                shadow: 'shadow-neon-green',
                bgColor: 'bg-neon-green/20',
                dotColor: 'bg-neon-green',
            };
        }
    }
    
    function getRainIcon(rainChance) {
        let iconColor = 'text-gray-400';
        let icon;
        if (rainChance === null || isNaN(rainChance)) {
             rainChance = 0; 
        }

        if (rainChance >= 60) {
            iconColor = 'text-matrix-blue';
            icon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cloud-rain ${iconColor}"><line x1="16" x2="16" y1="13" y2="13.01"/><line x1="8" x2="8" y1="13" y2="13.01"/><line x1="12" x2="12" y1="21" y2="21.01"/><path d="M12 15V9"/><path d="M2 13h2"/><path d="M20 13h2"/><path d="M17.5 12.8a7 7 0 1 0-8.5-8.5 4 4 0 0 0 0 7"/></svg>`;
        } else if (rainChance >= 20) {
            iconColor = 'text-matrix-blue/80';
            icon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cloud-drizzle ${iconColor}"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.35"/><line x1="16" x2="16" y1="17" y2="21"/><line x1="8" x2="8" y1="17" y2="21"/><line x1="12" x2="12" y1="19" y2="23"/></svg>`;
        } else {
            iconColor = 'text-neon-green/80';
            icon = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun ${iconColor}"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93l-1.41 1.41"/></svg>`;
        }

        return `<div class="flex items-center space-x-1 font-semibold text-xs">${icon}<span>${rainChance}%</span></div>`;
    }
    
    // --- PAGE RENDERING FUNCTIONS ---

    function renderZonesPage() {
        const container = document.getElementById('location-container');
        if (!container) return;
        container.innerHTML = ''; 
        
        // Get the current simulated wind and gust speed from the first (TODAY) entry
        const baseWindSpeed = currentForecastData[0]?.wind_speed;
        const baseGustSpeed = currentForecastData[0]?.gust_speed;

        const sortedLocations = locationData.sort((a, b) => a.name.localeCompare(b.name));

        sortedLocations.forEach(location => {
            const effectiveWind = getEffectiveWindSpeed(baseWindSpeed, location.name);
            const effectiveGust = getEffectiveWindSpeed(baseGustSpeed, location.name);
            
            const forecast = getUAVFlightRisk(effectiveWind, effectiveGust); 
            const nfzStyle = getNFZStyle(location.nfz_status);
            const advisoryColor = nfzStyle.color.replace('text-', 'text-') + (location.nfz_status === 'RESTRICTED' ? ' font-bold' : '/90');

            const html = `
                <div class="app-card bg-dark-card p-4 rounded-xl shadow-xl location-card-glow">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center space-x-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#00BFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin"><path d="M12 21.75l-4.5-5.5a7 7 0 1 1 9 0l-4.5 5.5z"/><circle cx="12" cy="10" r="3"/></svg>
                            <div>
                                <h2 class="text-lg font-bold text-white font-display">${location.name}</h2>
                                <p class="text-xs text-matrix-blue/70 -mt-0.5">${location.area} [${location.coords}]</p>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4 mt-3 pt-3 border-t border-matrix-blue/10">
                        <div>
                            <p class="text-xs text-matrix-blue/70 mb-1 font-semibold flex items-center">EFFECTIVE WIND / GUST</p>
                            <div class="flex items-center space-x-2">
                                <span class="text-2xl font-display ${forecast.color}">
                                    ${effectiveWind || '--'}<span class="text-sm font-sans ml-1">mph</span>
                                </span>
                                <span class="text-xs text-gray-400">(${effectiveGust || '--'} Gust)</span>
                            </div>
                        </div>
                        <div>
                            <p class="text-xs ${nfzStyle.color} mb-1 font-semibold flex items-center">FLIGHT RISK / NFZ STATUS</p>
                            <div class="flex items-center space-x-2">
                                <span class="status-pill ${forecast.bgColor} ${forecast.color} font-bold ring-1 ring-current">
                                    ${forecast.status}
                                </span>
                                <span class="status-pill ${nfzStyle.bgColor} ${nfzStyle.color} ring-1 ring-current font-bold">
                                    <span class="status-dot-sm inline-block ${nfzStyle.dotColor}"></span>
                                    ${nfzStyle.statusText.split(':')[0]}
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 pt-3 border-t border-matrix-blue/10">
                        <p class="text-xs font-bold ${nfzStyle.color} mb-1">ADVISORY:</p>
                        <p class="text-sm italic ${advisoryColor}">
                            ${location.notes}
                        </p>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        });
    }

    function renderForecastPage() {
        const container = document.getElementById('forecast-details-container');
        const lastUpdateSpan = document.getElementById('last-update-time');

        lastUpdateSpan.textContent = formatTime(lastFetchTime) || 'Never (Click Refresh)';
        container.innerHTML = ''; 

        if (currentForecastData.length >= 7) {
            const overview = currentForecastData[0];
            const currentForecast = getUAVFlightRisk(overview.wind_speed, overview.gust_speed);

            // --- Current Conditions Overview ---
            let overviewHTML = `
                <div class="app-card bg-dark-card p-5 rounded-xl shadow-2xl border-matrix-blue/40">
                    <h2 class="text-lg font-display text-matrix-blue mb-3">CURRENT BASE CONDITIONS (${getDayName(0)})</h2>
                    <div class="flex items-center justify-between">
                        <div class="flex items-end">
                            <span class="text-5xl font-display font-light ${currentForecast.color}">${overview.temp || '--'}&deg;C</span>
                            <span class="text-lg text-gray-500 ml-2">(${overview.wind_speed || '--'}mph)</span>
                        </div>
                        ${currentForecast.icon}
                    </div>
                    <div class="grid grid-cols-2 gap-3 mt-4 text-sm">
                        <p class="text-matrix-blue/80"><span class="font-bold">FLIGHT RATING:</span> <span class="font-display font-semibold ${currentForecast.color}">${currentForecast.status}</span></p>
                        <p class="text-matrix-blue/80"><span class="font-bold">GUSTS:</span> <span class="text-white">${overview.gust_speed || '--'} mph</span></p>
                        <p class="text-matrix-blue/80"><span class="font-bold">PRESSURE:</span> <span class="text-white">${overview.pressure || '--'} hPa</span></p>
                        <p class="text-matrix-blue/80"><span class="font-bold">WIND DIR:</span> <span class="text-white">${overview.direction || '--'}</span></p>
                    </div>
                    <p class="text-xs text-electric-yellow/80 mt-3 italic">
                        *Note: Gust speed is simulated as 1.5x max wind (WeatherAPI daily summary limitation).
                    </p>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', overviewHTML);

            // --- Detailed Forecast Log ---
            let detailedHTML = `<div class="space-y-2"><h2 class="text-lg font-display text-matrix-blue pt-6 mb-4">DETAILED 7-DAY LOG</h2>`;
            
            // Header for the detailed log (Desktop)
            detailedHTML += `
                <div class="hidden sm:flex justify-between items-center text-xs font-semibold text-matrix-blue/70 uppercase border-b border-matrix-blue/20 pb-2 mb-2">
                    <span class="w-1/6">Day</span>
                    <span class="w-1/6 text-center">Wind/Gust</span>
                    <span class="w-1/6 text-center">Dir. / Press.</span>
                    <span class="w-1/6 text-center">Temp / Rain</span>
                    <span class="w-1/6 text-center">Solar</span>
                    <span class="w-1/6 text-right">Rating</span>
                </div>
            `;

            // Only display the first 7 days
            for (let index = 0; index < 7; index++) {
                const dayForecast = currentForecastData[index];
                if (!dayForecast) continue; 
                
                const f = getUAVFlightRisk(dayForecast.wind_speed, dayForecast.gust_speed);
                const rainIconHtml = getRainIcon(dayForecast.rain);
                const dayName = getDayName(index);
                const isToday = index === 0;
                const bgColor = isToday ? 'bg-dark-hover' : 'bg-dark-card';
                
                detailedHTML += `
                    <div class="app-card ${bgColor} p-3 rounded-xl border border-matrix-blue/10 hover:border-matrix-blue/40 transition duration-150">
                        <!-- Desktop/Tablet View --><div class="hidden sm:flex justify-between items-center">
                            <span class="font-bold w-1/6 ${isToday ? 'text-white' : 'text-matrix-blue/80'}">${dayName}${isToday ? ' (TODAY)' : ''}</span>
                            <span class="w-1/6 text-center text-sm font-semibold ${f.color}">${dayForecast.wind_speed || '--'}/${dayForecast.gust_speed || '--'}</span>
                            <span class="w-1/6 text-center text-xs text-gray-300">${dayForecast.direction || '--'} / ${dayForecast.pressure || '--'}</span>
                            <span class="w-1/6 text-center text-sm text-gray-300 flex justify-center items-center space-x-2">
                                <span>${dayForecast.temp || '--'}&deg;C</span>
                                ${rainIconHtml}
                            </span>
                            <span class="w-1/6 text-center text-sm text-gray-300">${dayForecast.solar || '--'}</span>
                            <span class="w-1/6 text-right status-pill ${f.bgColor} ${f.color} ring-1 ring-current">${f.status}</span>
                        </div>
                        
                        <!-- Mobile View (Stacked) --><div class="sm:hidden grid grid-cols-2 gap-2 text-sm">
                            <div class="font-bold ${isToday ? 'text-white' : 'text-matrix-blue/80'}">${dayName}${isToday ? ' (TODAY)' : ''}</div>
                            <div class="text-right"><span class="status-pill ${f.bgColor} ${f.color} ring-1 ring-current">${f.status}</span></div>
                            
                            <div class="text-matrix-blue/70">Wind/Gust:</div>
                            <div class="text-right font-semibold ${f.color}">${dayForecast.wind_speed || '--'} / ${dayForecast.gust_speed || '--'} mph</div>
                            
                            <div class="text-matrix-blue/70">Temp/Rain:</div>
                            <div class="text-right text-gray-300 flex justify-end items-center space-x-2">
                                <span>${dayForecast.temp || '--'}&deg;C</span>
                                ${rainIconHtml}
                            </div>

                            <div class="text-matrix-blue/70">Pressure/Solar:</div>
                            <div class="text-right text-gray-300">${dayForecast.pressure || '--'} hPa / ${dayForecast.solar || '--'}</div>
                        </div>
                    </div>
                `;
            }

            detailedHTML += `</div>`;
            container.insertAdjacentHTML('beforeend', detailedHTML);
        } else {
            container.innerHTML = `<div class="text-center p-8 text-gray-500 bg-dark-card rounded-xl border border-electric-yellow/30">
                <p class="text-lg">Weather Data Error</p>
                <p class="text-sm mt-1">Forecast data is unavailable. Please refresh the live feed.</p>
            </div>`;
        }
    }

    function renderAlertsPage() {
        const container = document.getElementById('alerts-container');
        if (!container) return;
        container.innerHTML = '';

        alertData.forEach(alert => {
            let priorityStyle, icon;

            switch (alert.priority) {
                case 'CRITICAL':
                    priorityStyle = 'border-danger-red shadow-neon-red/50';
                    icon = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-zap-off text-danger-red"><polyline points="12.43 21 19 14 18.57 10.5"/><line x1="18" x2="22" y1="4" y2="8"/><line x1="2" x2="6" y1="16" y2="20"/><path d="M10.56 12.56L10 12l-6 8h12l-.78-1.28"/></svg>';
                    break;
                case 'HIGH':
                    priorityStyle = 'border-electric-yellow shadow-neon-yellow/50';
                    icon = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle text-electric-yellow"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></svg>';
                    break;
                case 'MEDIUM':
                    priorityStyle = 'border-matrix-blue shadow-app-focus/50';
                    icon = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info text-matrix-blue"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>';
                    break;
                default: // LOW
                    priorityStyle = 'border-neon-green shadow-neon-green/50';
                    icon = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-circle text-neon-green"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M9 11l3 3L22 4"/></svg>';
                    break;
            }

            const html = `
                <div class="app-card bg-dark-card p-4 rounded-xl shadow-lg border-l-4 ${priorityStyle}">
                    <div class="flex justify-between items-start">
                        <div class="flex items-center space-x-3">
                            ${icon}
                            <div>
                                <h3 class="text-base font-bold text-white">${alert.type}</h3>
                                <p class="text-xs text-matrix-blue/70 -mt-0.5 font-display">${alert.area} / ${alert.date}</p>
                            </div>
                        </div>
                        <span class="status-pill text-xs font-bold ring-1 ring-current ${alert.priority === 'CRITICAL' ? 'bg-danger-red/20 text-danger-red' : alert.priority === 'HIGH' ? 'bg-electric-yellow/20 text-electric-yellow' : 'bg-matrix-blue/20 text-matrix-blue'}">
                            ${alert.priority}
                        </span>
                    </div>
                    <p class="text-sm text-gray-400 mt-3 pt-3 border-t border-matrix-blue/10 italic">
                        ${alert.details}
                    </p>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        });

        if (alertData.length === 0) {
            container.innerHTML = `<div class="text-center p-8 text-gray-500 bg-dark-card rounded-xl border border-neon-green/30">
                <p class="text-lg">No Critical Advisories Active.</p>
                <p class="text-sm mt-1">Local airspace is clear. Always check local zone requirements.</p>
            </div>`;
        }
    }
    
    // --- CONTROL LOGIC (Split into lock and interactions) ---

    // Function to set up the actual control panel interactions (only runs when unlocked)
    function setupControlPanelInteractions() {
        const windInput = document.getElementById('input-wind-speed');
        const gustInput = document.getElementById('input-gust-speed');
        const updateButton = document.getElementById('update-forecast-btn');
        const refreshButton = document.getElementById('refresh-live-data-btn');
        
        // Listener for Live Data Refresh
        refreshButton.onclick = () => {
             fetchRealWeatherForecast();
        };

        // Initialize inputs with current TODAY data
        windInput.value = currentForecastData[0]?.wind_speed || '';
        gustInput.value = currentForecastData[0]?.gust_speed || '';

        // Listener for Day 1 Override (Existing)
        updateButton.onclick = () => {
            const newWind = parseInt(windInput.value);
            const newGust = parseInt(gustInput.value);
            const statusDiv = document.getElementById('update-status');

            if (isNaN(newWind) || isNaN(newGust) || newWind < 0 || newGust < 0) {
                statusDiv.textContent = 'ERROR: Please enter valid positive numbers for wind and gust.';
                statusDiv.className = 'text-center text-sm font-semibold pt-3 text-danger-red block';
                return;
            }
            
            if (currentForecastData.length < 1) {
                statusDiv.textContent = 'ERROR: Cannot apply override, live data not yet loaded.';
                statusDiv.className = 'text-center text-sm font-semibold pt-3 text-danger-red block';
                return;
            }

            // Update the TODAY (index 0) entry
            currentForecastData[0].wind_speed = newWind;
            currentForecastData[0].gust_speed = newGust;

            // Persist the override separately
            saveDay1Override(newWind, newGust);
            
            // Re-render the active page to show changes immediately
            const activePage = document.querySelector('.page-content.active').getAttribute('data-page-name');
            changePage(activePage); 
            
            const risk = getUAVFlightRisk(newWind, newGust);
            statusDiv.innerHTML = `
                DAY 1 OVERRIDE APPLIED. Wind: <span class="font-display ${risk.color}">${newWind} mph</span>, 
                Gust: <span class="font-display ${risk.color}">${newGust} mph</span>. 
                Risk: <span class="font-bold ${risk.color}">${risk.status}</span>.
            `;
            statusDiv.className = 'text-center text-sm font-semibold pt-3 text-neon-green shadow-green-glow block';

            setTimeout(() => {
                statusDiv.classList.add('hidden');
                statusDiv.classList.remove('shadow-green-glow');
            }, 3000);
        };
    }

    // Function to manage the lock state of the Control page
    function handleControlPage() {
        const contentDiv = document.getElementById('control-panel-content');
        const lockForm = document.getElementById('control-lock-form');

        if (isControlUnlocked) {
            // Unlocked: Show content, hide lock form
            lockForm.classList.add('hidden');
            contentDiv.classList.remove('hidden');
            setupControlPanelInteractions(); 
        } else {
            // Locked: Hide content, show lock form
            contentDiv.classList.add('hidden');
            lockForm.classList.remove('hidden');
            setupControlLock(); 
        }
    }
    
    // Function to handle the lock input/button
    function setupControlLock() {
        const lockInput = document.getElementById('control-secret-code');
        const unlockBtn = document.getElementById('control-unlock-btn');
        const lockStatus = document.getElementById('control-lock-status');
        const contentDiv = document.getElementById('control-panel-content');
        const lockForm = document.getElementById('control-lock-form');
        
        // Clear previous input/status
        lockInput.value = '';
        lockStatus.classList.add('hidden');
        lockInput.disabled = false;
        unlockBtn.disabled = false;

        const verifyCode = (event) => {
            // Only proceed on click or Enter key press
            if (event.type === 'keydown' && event.key !== 'Enter') return;
            
            if (parseInt(lockInput.value) === SECRET_CODE) {
                // SUCCESS: Grant Access
                lockStatus.innerHTML = 'ACCESS GRANTED. Control panel unlocked.';
                lockStatus.className = 'text-center text-sm font-semibold pt-4 text-neon-green shadow-green-glow block';
                lockInput.disabled = true;
                unlockBtn.disabled = true;
                
                isControlUnlocked = true; // Set global state
                
                // Show content and hide lock form
                lockForm.classList.add('hidden');
                contentDiv.classList.remove('hidden');
                
                // Set up interactions now that the panel is visible
                setupControlPanelInteractions();

            } else {
                // FAILURE: Access Denied
                lockStatus.innerHTML = 'ACCESS DENIED. Invalid security key.';
                lockStatus.className = 'text-center text-sm font-semibold pt-4 text-danger-red shadow-neon-red block';
                lockInput.value = ''; // Clear input on failure
                lockInput.focus();

                setTimeout(() => {
                    lockStatus.classList.add('hidden');
                    lockStatus.classList.remove('shadow-neon-red');
                }, 3000);
            }
            lockStatus.classList.remove('hidden');
        };

        // Attach listeners (re-attaching them is safe since we set up the lock on every page change)
        unlockBtn.onclick = verifyCode;
        // Check if an event listener is already attached before adding
        lockInput.onkeydown = verifyCode;
        
        // Focus the input when the lock form appears
        lockInput.focus();
    }


    // --- PAGE CONTROL LOGIC ---

    let currentPage = 'Zones';

    function changePage(pageName) {
        currentPage = pageName;

        document.querySelectorAll('.page-content').forEach(section => {
            if (section.getAttribute('data-page-name') === pageName) {
                section.classList.add('active');
            } else {
                section.classList.remove('active');
            }
        });

        document.querySelectorAll('.nav-btn').forEach(btn => {
            if (btn.getAttribute('data-page') === pageName) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        const mainContent = document.getElementById('app-main');
        mainContent.scrollTop = 0; 

        switch (pageName) {
            case 'Zones':
                renderZonesPage();
                break;
            case 'Forecast':
                renderForecastPage();
                break;
            case 'Alerts':
                renderAlertsPage();
                break;
            case 'Control':
                handleControlPage();
                break;
        }
    }

    // --- PWA INSTALL PROMPT LOGIC ---

    function showInstallPrompt() {
        const installPrompt = document.getElementById('install-prompt');
        const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches || navigator.standalone;

        if (isIOS && !isStandalone) {
            installPrompt.style.display = 'block'; 
            
            setTimeout(() => {
                installPrompt.classList.add('visible');
            }, 50); 

            document.getElementById('close-prompt').addEventListener('click', () => {
                installPrompt.classList.remove('visible');
                setTimeout(() => {
                    installPrompt.style.display = 'none';
                }, 300); 
            });
        } else {
            installPrompt.style.display = 'none';
        }
    }


    // --- INITIALIZATION ---
    function initializeApp() {
        // 1. Load local override and last fetch time
        loadInitialState();

        // 2. Fetch the initial real-world data (to populate immediately)
        fetchRealWeatherForecast();

        // 3. Navigation Setup
        document.querySelectorAll('.nav-btn').forEach(button => {
            button.addEventListener('click', (event) => {
                event.preventDefault();
                const page = button.getAttribute('data-page');
                changePage(page);
            });
        });

        // 4. Render Initial Pages (will show default data until fetch completes)
        changePage('Zones'); 
        
        // 5. Show PWA Prompt
        showInstallPrompt();
    }
    
    // --- START UP ---
    window.onload = initializeApp; 

</script>
<!-- Floating Feedback Bubble -->
<div id="feedbackBubble" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #1d4ed8;
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(29,78,216,0.7);
    font-size: 28px;
    z-index: 1000;
    transition: transform 0.2s;
">ðŸ’¬</div>

<!-- Hidden Feedback Modal -->
<div id="feedbackModal" style="
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: rgba(0,0,0,0.7);
    z-index: 1001;
    justify-content: center;
    align-items: center;
">
  <div style="
      background-color: #1e1e1e;
      padding: 25px;
      border-radius: 12px;
      max-width: 420px;
      width: 90%;
      position: relative;
      border: 2px solid #1d4ed8;
      box-shadow: 0 0 20px #1d4ed8;
      color: white;
      font-family: sans-serif;
  ">
    <!-- Close button -->
    <span id="closeModal" style="
        position: absolute;
        top: 12px; right: 15px;
        cursor: pointer;
        font-size: 22px;
        font-weight: bold;
        color: #ffffffaa;
        transition: color 0.2s;
    ">&times;</span>

    <h3 style="margin-bottom:15px; font-size:20px; color:#1d4ed8;">Feedback / Suggestions</h3>

    <form id="bubbleFeedbackForm" action="https://formspree.io/f/mnnoworr" method="POST">
      <input type="text" name="name" placeholder="Your name" style="
          width:100%; margin-bottom:12px; padding:10px;
          border-radius:6px; border:1px solid #1d4ed8;
          background:#2b2b2b; color:white;
      " required>
      <input type="email" name="_replyto" placeholder="Your email (optional)" style="
          width:100%; margin-bottom:12px; padding:10px;
          border-radius:6px; border:1px solid #1d4ed8;
          background:#2b2b2b; color:white;
      ">
      <textarea name="message" rows="5" placeholder="Your message" style="
          width:100%; margin-bottom:12px; padding:10px;
          border-radius:6px; border:1px solid #1d4ed8;
          background:#2b2b2b; color:white;
      " required></textarea>
      <button type="submit" style="
          width:100%; background:#1d4ed8; color:white; padding:10px;
          border:none; border-radius:6px; cursor:pointer; font-weight:bold;
          transition: background 0.2s, box-shadow 0.2s;
      ">Send</button>
      <p id="feedbackSuccess" style="display:none; color:#34d399; margin-top:10px; font-weight:bold;">âœ… Feedback sent!</p>
    </form>
  </div>
</div>

<script>
const form = document.getElementById('bubbleFeedbackForm');
const bubble = document.getElementById('feedbackBubble');
const modal = document.getElementById('feedbackModal');
const close = document.getElementById('closeModal');
const successMsg = document.getElementById('feedbackSuccess');

// Open modal
bubble.addEventListener('click', () => {
    modal.style.display = 'flex';
    successMsg.style.display = 'none';
});

// Close modal
close.addEventListener('click', () => modal.style.display = 'none');

// Submit form via Formspree
form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);

    try {
        const response = await fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: { 'Accept': 'application/json' }
        });

        if(response.ok){
            form.reset();
            successMsg.style.display = 'block';
            setTimeout(() => modal.style.display = 'none', 2000);
        } else {
            const data = await response.json();
            alert(data?.error || 'Oops! There was a problem sending your feedback.');
        }
    } catch (error) {
        console.error(error);
        alert('Error sending feedback. Please try again later.');
    }
});
</script>

    <footer id="site-footer" style="
    text-align: center;
    padding: 25px;
    background: #10121f;
    color: #9ba5d1;
    font-size: 0.95rem;
    border-top: 1px solid #27305a;
    margin-top: 40px;
">

</body>
